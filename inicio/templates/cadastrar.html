{% extends 'base.html' %}
{% load static %}
{% block titulo %}Cadastro{% endblock titulo %}

{% block conteudo %}

<a href="{% url 'home' %}"><i class="fa-solid fa-house"></i></a>
<div class="container" >
    <div class="content">    
        <img src="{% static 'img/logo.png' %}"style='width:110px;height:auto'>
              <!--FORMULÁRIO DE CADASTRO-->
        <div id="cadastro">
            <form method="post" id="MyForm"> 
                {% csrf_token %}
                <h2>Crie sua conta</h2>
                {% for l in form %}

                {% if not l.label == 'Telefone' %}
                    <div class="label-float">
                        {{l}}
                        <label>{{l.label}}</label>
                        {{l.errors}}
                    </div>
                {% endif %}

                {% endfor %}
                
                <div class="g-recaptcha" data-sitekey="{{recaptcha_site_key}}"></div>
                {% include 'parciais/_messages.html' %}
                <p> 
                    <button type="submit" id='btnSalvar' ><img src="{% static 'img/load.gif' %}" style='width:27px;margin-right:5px' id='load'> Cadastrar </button>
                </p>
                
                <p class="link">  
                    <a href="{% url 'entrar' %}">Já tem uma conta?</a>
                </p>
            </form>
            <script>
                document.getElementById('load').style.display = 'none';

                $( document ).ready(function() {

                    $('#btnSalvar').on('click', function (e) {

                        var button = $('#btnSalvar');

                        button.prop('disabled', true);

                        var valid = $("#MyForm").valid();
                        console.log(valid);

                        if (!valid) {
                            e.preventDefault();
                            button.prop('disabled', false);
                            $("label.error").remove();

                        } else {
                            document.getElementById('load').style.display = 'block';
                            $('#MyForm').submit();
                        }
                    });
                });    
            </script>
        </div>
    </div>
</div>


{% endblock conteudo %}